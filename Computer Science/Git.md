# Git

## 版本控制

### 版本控制

- 个人开发改进迭代
- 团队协作
- 来源：工程设计领域中使用版本控制管理工程蓝图的设计过程。

### 版本控制工具

- 集中式版本控制工具
- 分布式版本控制工具
- 功能

	- 协同修改

		- 多人并行不悖的修改服务器端的同一个文件

	- 数据备份

		- 不仅保留目录和文件的当前状态，还能保存每一个提交过的历史状态

	- 版本控制

		- 在保留每一个版本的文件信息的时候要做到不保留重复数据，以节约存储空间，提高运行效率。

			- svn采用增量式管理
			- git采用文件系统快照

	- 权限控制

		- 对团队中参与开发的人员进行权限控制。对团队外开发者贡献的代码进行审核——git独有

	- 历史记录

		- 查看修改人、修改时间、修改内容、日志信息。
		- 将本地文件恢复到某一个历史状态。

	- 分支管理

		- 允许开发团队在工作过程中多条生产线同时推进任务，进一步提高效率

## Git 命令行

### 本地库初始化

- 命令：git init

### 设置签名

- 作用：区分不同开发人员的身份
- 注意：这里设置的签名和登录远程库(代码托管中心)的账号、密码没有任何关 系。
- 命令

	- 项目级别/仓库级别：仅在当前本地库范围内有效

		- git config user.name user
git config user.email user@xxx.com
		- 信息保存位置：./.git/config  文件

	- 系统用户级别：登录当前操作系统的用户范围

		- git config --global user.name user
git config --global user.email user@xxx.com

- 级别优先级

	- 就近原则：项目级别优先于系统用户级别，二者都有时采用项目级别 的签名
	- 如果只有系统用户级别的签名，就以系统用户级别的签名为准
	- 二者都没有不允许

### 基本操作

- 查看帮助

	- git help 命令
	- 比如： git help status

- 状态查看

	- git status
	- 查看工作区、暂存区状态

- 添加

	- git add [file name]
	- 将工作区的“新建/修改”添加到暂存区

- 提交

	- git commit -m "commit message" [file name]
	- 将暂存区的内容提交到本地库

- 查看历史记录

	- git log

		- git log --pretty=oneline
		- git log --oneline

			- HEAD@{移动到当前版本需要多少步}

	- 多屏显示控制方式： 
空格向下翻页 
b 向上翻页
q 退出

- 版本前进后退

	- 基于索引值操作[推荐]

		- git reset --hard [局部索引值]

	- 使用^符号：只能后退

		- git reset --hard HEAD^

			- 一个^表示后退一步，n  个^表示后退  n  步

	- 使用~符号：只能后退

		- git reset --hard HEAD~n

			- 注：表示后退  n  步

	- reset 命令的三个参数对比

		- --soft  参数

			- 仅仅在本地库移动  HEAD  指针

		- --mixed 参数

			- 在本地库移动  HEAD  指针
			- 重置暂存区

		- --hard 参数

			- 在本地库移动  HEAD  指针
			- 重置暂存区
			- 重置工作区

	- 删除文件并找回

		- 前提：删除前，文件存在时的状态提交到了本地库。
		- 操作：git reset --hard [指针位置]
		- 删除操作已经提交到本地库：指针位置指向历史记录
		- 删除操作尚未提交到本地库：指针位置使用  HEAD

- 比较文件差异

	- git diff [文件名]

		- 将工作区中的文件和暂存区进行比较

	- git diff [本地库中历史版本] [文件名]

		- 将工作区中的文件和本地库历史记录比较

- 分支管理

	- 在版本控制过程中，使用多条线同时推进多个任务。
	- 优势

		- 同时并行推进多个功能开发，提高开发效率
		- 各个分支在开发过程中，如果某一个分支开发失败，不会对其他分支有任 何影响。失败的分支删除重新开始即可。

	- 分支操作

		- 创建分支

			- git branch [分支名]

		- 查看分支

			- git branch -v

		- 切换分支

			- git checkout [分支名]

		- 合并分支

			- git checkout [被合并分支名]

				- 需切换到接受修改的分支（被合并，增加新内容）上

			- git merge [有新内容分支名]

				- 执行  merge 命令

		- 解决冲突

			- 第一步：编辑文件，删除特殊符号
第二步：把文件修改到满意的程度，保存退出
 第三步：git add [文件名]
第四步：git commit -m "日志信息"


				- 注意：此时  commit 一定不能带具体文件名

### 远程库操作

- 创建

	- git remote -v 

		- 查看当前所有远程地址别名
		- git remote add [别名|网址] [远程地址]

- 推送

	- git push [别名] [分支名]

		- 将本体库上传到远程库

- 克隆

	- git clone [远程地址]

		- 完整的把远程库下载到本地
		- 创建  origin  远程地址别名
		- 初始化本地库

- 拉取

	- git pull [远程库地址别名] [远程分支名]

		- pull=fetch+merge
		- git fetch [远程库地址别名] [远程分支名]
		- git merge [远程库地址别名/远程分支名]

- 解决冲突

	- 如果不是基于  GitHub  远程库的最新版所做的修改，不能推送，必须先拉取。
	- 拉取下来后如果进入冲突状态，则按照“分支冲突解决”操作解决即可。

